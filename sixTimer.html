<!DOCTYPE html>
<html>
  <head>
      <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>sixTimer - jsFiddle demo</title>
          
          <script type='text/javascript' src='http://code.jquery.com/jquery-git.js'></script>
            
		<!-- http://jsfiddle.net/edwardsharp/mQKSa/ -->            
            
            <link rel="stylesheet" type="text/css" href="/css/result-light.css">
              
                
                  <script type='text/javascript' src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
                      
                    
                      
                        <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
                            
                          
                          <style type='text/css'>
                                .ui-progressbar {
                                      position: relative;
                                    }
                                    .progress-label {
                                          color:#fff;
                                              position: absolute;
                                                  left: 50%;
                                                      top: 4px;
                                                          font-weight: bold;
                                                              text-shadow: 0px 0px 10px #000;
                                                            }
                                                            .ui-widget-header {
                                                                  background: gray;
                                                                      border-color: gray;
                                                                    }
                                                                    #sixr {
                                                                    }
                                                                      </style>
                                                                        


                                                                      <script type='text/javascript'>//<![CDATA[ 

                                                                        var isCycleA = true;
                                                                        var secToNextCycle = 0;
                                                                        var arr6 = [0, 6, 12, 18, 24, 30, 36, 42, 48, 54];

                                                                        $(function () {
                                                                              $("#progressbar").progressbar({
                                                                                        value: 0
                                                                                            });
                                                                                            });

                                                                                            function zPad(num) {
                                                                                                  if (num < 10) {
                                                                                                            return "0" + num;
                                                                                                                }
                                                                                                                    return num;
                                                                                                                  }
                                                                                                                  (function ($) {
                                                                                                                        $.fn.sixTimer = function () {

                                                                                                                                  function getTime() {
                                                                                                                                                var date = new Date();
                                                                                                                                                            return {
                                                                                                                                                                              zPhour: date.getHours(),
                                                                                                                                                                                              zPminute: zeroPad(date.getMinutes()),
                                                                                                                                                                                                              zPsecond: zeroPad(date.getSeconds()),
                                                                                                                                                                                                                              hour: date.getHours(),
                                                                                                                                                                                                                                              minute: date.getMinutes(),
                                                                                                                                                                                                                                                              second: date.getSeconds()
                                                                                                                                                                                                                                                                          };
                                                                                                                                                                                                                                                                                  }

                                                                                                                                                                                                                                                                                          function zeroPad(num) {
                                                                                                                                                                                                                                                                                                        if (num < 10) {
                                                                                                                                                                                                                                                                                                                          return "_0" + num;
                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                  return "_" + num;
                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                  function timeInterval() {
                                                                                                                                                                                                                                                                                                                                                                                var now = getTime();
                                                                                                                                                                                                                                                                                                                                                                                            if (arr6.indexOf(now.minute) > -1 && !(now.second % 60)) {
                                                                                                                                                                                                                                                                                                                                                                                                              isCycleA = isCycleA ? false : true;
                                                                                                                                                                                                                                                                                                                                                                                                                              //console.log(isCycleA);
                                                                                                                                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                                                                                                                                                      var progVal = (((now.minute % 6) * 60 + now.second) / (360)) * 100;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                  var minutes = Math.floor((360 * (progVal / 100)) / 60);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                              var seconds = (360 * (progVal / 100)) - minutes * 60;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          var pLabel = Math.abs(minutes.toFixed(0)-5) + ':' + zPad(Math.abs(seconds.toFixed(0)-60));


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      //console.log(minutes.toFixed(0), seconds.toFixed(0));
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  $(".progress-label").text(pLabel);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              $('#time').html("<span class='hour'>" + now.zPhour + "</span>" + "<span class='minute'>" + now.zPminute + "</span>" + "<span class='second'>" + now.zPsecond + "</span>");

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          //update progressbar
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      $("#progressbar").progressbar("option", {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        value: progVal
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                bg = '';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            if (isCycleA) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              bg = '#ffff00';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          } else {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          bg = '#ff6600';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  $("#progressbar").css({
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    "background": bg
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                timeInterval();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        setInterval(timeInterval, 1000);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            })(jQuery);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            $(document).ready(function () {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  $('#sixr').sixTimer();

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  //]]>  

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </script>


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <div id="sixr" style="display:none">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <div id="time"> <span class="hour"></span>  <span class="minute"></span>  <span class="second"></span>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <div id="progressbar">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <div class="progress-label"></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </body>


                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </html>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
